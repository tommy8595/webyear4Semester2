@model System.Data.DataTable
@using System.Data;
@using System.Globalization;
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
          crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/"
          crossorigin="anonymous">
    <link rel="stylesheet" href="~/css/style.css">
    <title>Document</title>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="@Url.Action("Menu", "Menu")">
            <img src="img/logo1.png" alt="" height="90px" width="190px">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="@Url.Action("Subject", "Subject")">Subject <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="@Url.Action("Schedule", "Schedule")">Schedule</a>
                <li class="nav-item">
                    <a class="nav-link" href="@Url.Action("Index", "Homework_Assignment")">Assignment</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="@Url.Action("Index", "Attandance")">Attendance</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="@Url.Action("Index", "Score")">Score</a>
                </li>
                <li class="nav-item">
                    <button type="button" class="btn btn-danger" onclick="location.href='@Url.Action("Main", "Main")'">Logout</button>
                </li>
            </ul>
        </div>
    </nav>

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="@Url.Action("Menu", "Menu")">Home</a></li>
            <li class="breadcrumb-item"><a href="@Url.Action("Subject", "Subject")">Menu</a></li>
            <li class="breadcrumb-item active" aria-current="page">Lesson</li>
        </ol>
    </nav>

    <!-- Section Content -->
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <img src="https://cdn-images-1.medium.com/max/1600/1*hRCR2q2OF7cPjIi1ZZbHPg.jpeg" alt="" class="img-fluid">
            </div>
            <div class="col-md-8">
                <div class="row teacherContent">
                    <div class="col-md-4 imageCenter">
                        <img src="@Model.Rows[Model.Rows.Count - 1]["tea_picture"].ToString()" alt=""
                             class="img-fluid img-border-radius">
                    </div>
                    @{int av = DateTime.Now.Year - (DateTime.Parse(Model.Rows[Model.Rows.Count - 1]["tea_dob"].ToString())).Year; }
                    <div class="col-md-8">
                        <p><b>Name&nbsp;:@Model.Rows[Model.Rows.Count - 1]["tea_name"].ToString()</b></p>
                        <p>Email&nbsp;:@Model.Rows[Model.Rows.Count - 1]["tea_email"].ToString()</p>
                        <p>Age&nbsp;:  @av</p>
                        <p>Sex&nbsp;: @Model.Rows[Model.Rows.Count - 1]["tea_gender"].ToString()</p>
                        <p>Date of birth&nbsp;@DateTime.Parse(Model.Rows[Model.Rows.Count - 1]["tea_dob"].ToString()).ToShortDateString()</p>
                        <p>Address&nbsp;: @Model.Rows[Model.Rows.Count - 1]["tea_address"].ToString()</p>
                    </div>
                </div>
            </div>
            <section class="subDetailContent">
                <p><b>Description</b></p>
                <p>
                    @Model.Rows[Model.Rows.Count - 2]["sub_description"].ToString()
                </p>
            </section>
        </div>

        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-5">
                <div class="accordion" id="accordionExample">
                    <!--Drop Box 01-->
                    @{
                        int n = 0;
                        int order = 0;
                        int m = 0;
                        int co = 1;

                        do
                        {
                            int v1; int v2;

                            v1 = int.Parse(Model.Rows[n]["chap_id"].ToString());
                            if (Model.Rows[n + 1]["chap_id"].ToString() == string.Empty)
                            {
                                <div class="card">
                                    <div class="card-header" id="headingOne">
                                        <h2 class="mb-0">
                                            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne_@n.ToString()"
                                                    aria-expanded="true" aria-controls="collapseOne">
                                                <!--klang download-->
                                                    CHAPTER @co :        @Model.Rows[order]["chap_name"].ToString()
                                                
                                            </button>
                                        </h2>
                                    </div>

                                    <div id="collapseOne_@n.ToString()" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
                                        <div class="card-body">
                                            @{ for (int i = m; i <= n; i++)
                                                {

                                                    <div><b>Lession @(i + 1):</b> @Model.Rows[i]["les_name"].ToString(); <br /></div>

                                                }
                                            }
                                        </div>
                                    </div>
                                </div>
                                co++;
                                break;
                            }
                            else
                            {
                                v2 = int.Parse(Model.Rows[n + 1]["chap_id"].ToString());
                            }
                            if (v1 != v2)
                            {
                                <div class="card">
                                    <div class="card-header" id="headingOne">
                                        <h2 class="mb-0">
                                            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseTwo_@n.ToString()"
                                                    aria-expanded="true" aria-controls="collapseTwo_@n.ToString()">
                                                <a href="@Model.Rows[order]["chap_file_path_pdf"].ToString()" download>
                                                    CHAPTER @co :        @Model.Rows[order]["chap_name"].ToString()
                                                </a>
                                            </button>
                                        </h2>
                                    </div>
                                    <!--id="Model.Rows[order]["les_file_path_video"].ToString()" onclick="change_video()"-->
                                    <div id="collapseTwo_@n.ToString()" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
                                        <div class="card-body">
                                            @{
                for (int i = m; i <= n; i++)
                {

                                <div>Lesson @(i + 1): @Model.Rows[i]["les_name"].ToString() <br /></div>
if (v1 != int.Parse(Model.Rows[i + 1]["chap_id"].ToString())) { m = n + 1; break; }
}
                                            }
                                        </div>
                                    </div>
                                </div>
                                n++;
                                order++;
                                co++;

                            }

                            else if (int.Parse(Model.Rows[n]["chap_id"].ToString()) == int.Parse(Model.Rows[n + 1]["chap_id"].ToString()))
                            {
                                n++;
                                order++;
                            }
                        } while (n < Model.Rows.Count - 2);
                    }

                </div>
            </div>
            @*<script>
                function change_video(id) {
                    var a = document.getElementById("video");

                    a.src = id;
                }
            </script>*@
            <div class="col-sm-12 col-md-12 col-lg-7">
                <div class="embed-responsive embed-responsive-16by9">
                    <iframe class="embed-responsive-item" src="@Model.Rows[0]["les_file_path_video"].ToString()"
                            allowfullscreen id="video"></iframe>
                </div>
            </div>
        </div>
    </div>
    <br>


    <!-- End Section Content -->
    <!-- Footer -->
    <footer class="page-footer font-small cyan darken-3 special-color-dark ">
        <center>
            <div class="container">
                <div class="row">
                    <div class="col-md-12 py-5">
                        <div class="flex-center">
                            <a class="fb-ic">
                                <i class="fab fa-facebook-f fa-lg white-text mr-md-5 mr-3 fa-2x"> </i>
                            </a>
                            <a class="tw-ic">
                                <i class="fab fa-twitter fa-lg white-text mr-md-5 mr-3 fa-2x"> </i>
                            </a>
                            <a class="gplus-ic">
                                <i class="fab fa-google-plus-g fa-lg white-text mr-md-5 mr-3 fa-2x"> </i>
                            </a>
                            <a class="li-ic">
                                <i class="fab fa-linkedin-in fa-lg white-text mr-md-5 mr-3 fa-2x"> </i>
                            </a>
                            <a class="ins-ic">
                                <i class="fab fa-instagram fa-lg white-text mr-md-5 mr-3 fa-2x"> </i>
                            </a>
                            <a class="pin-ic">
                                <i class="fab fa-pinterest fa-lg white-text fa-2x"> </i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-copyright text-center py-3">
                <span>2018 © Royal University of Phnom Penh</span>
            </div>
        </center>
    </footer>
</body>

</html>
